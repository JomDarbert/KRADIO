var client_id,container,currentTime,endTime,exclude_tags,eyk,getActivePlayer,getRandomSong,getReadyPlayer,getTimeFromSecs,hangul,hangul_chars,logEvent,mwave,nextButton,pad,playButton,playNext,player_five,player_four,player_one,player_three,player_two,preparePlayer,priority_tags,seek,setActivePlayer,song,song_title,top_queries,_i,_j,_len,_len1,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};for(client_id="2721807f620a4047d473472d46865f14",priority_tags=["kpop","k pop","k-pop","korean","korea"],exclude_tags=["cover","acoustic","instrumental","remix","mix","re mix","re-mix","version","ver.","cvr"],hangul_chars="[ᄀ-ᇿ|㄰-㆏|ꥠ-꥿|가-힯|ힰ-퟿]",hangul=new RegExp(hangul_chars),eyk=function(){var e;return e=null,$.ajax({async:!1,global:!1,url:"../scrape/EYK/tutorial/eyk.json",dataType:"json",success:function(t){e=t}}),e}(),mwave=function(){var e;return e=null,$.ajax({async:!1,global:!1,url:"../scrape/MWAVE/tutorial/mwave.json",dataType:"json",success:function(t){e=t}}),e}(),top_queries=[],_i=0,_len=eyk.length;_len>_i;_i++)song=eyk[_i],top_queries.push(song.title);for(_j=0,_len1=mwave.length;_len1>_j;_j++)song=mwave[_j],top_queries.push(song.artist+" "+song.title);player_one=document.getElementById("player_one"),player_two=document.getElementById("player_two"),player_three=document.getElementById("player_three"),player_four=document.getElementById("player_four"),player_five=document.getElementById("player_five"),song_title=document.getElementById("title"),container=document.getElementById("container"),playButton=document.getElementById("playButton"),nextButton=document.getElementById("nextButton"),seek=document.getElementById("seek"),currentTime=document.getElementById("currentTime"),endTime=document.getElementById("endTime"),pad=function(e){return 10>e?"0"+e.toString():e.toString()},getTimeFromSecs=function(e){var t,n,r,a;return n=e/60,a=n%1*60,t=Math.floor(n),r=Math.floor(a),""+t+":"+pad(r)},logEvent=function(e){var t;return t=(new Date).toTimeString().split(" ")[0],console.log(""+t+" || "+e.target.id+" - "+e.type)},playNext=function(){var e,t;return e=getActivePlayer(),e.pause(),preparePlayer(e),t=getReadyPlayer(),setActivePlayer(t),t.play()},setActivePlayer=function(e){var t,n,r,a,o;for(r=document.getElementsByTagName("audio"),a=0,o=r.length;o>a;a++)n=r[a],t=n.classList.contains("active"),n===e&&t!==!0?(n.classList.add("active"),n.classList.remove("ready")):n.classList.remove("active");return song_title.innerHTML=e.getAttribute("title"),endTime.innerHTML=getTimeFromSecs(e.getAttribute("duration")/1e3),seek.setAttribute("max",e.getAttribute("duration")/1e3),container.style.background="url("+e.getAttribute("artwork")+") no-repeat center center fixed",container.style["background-size"]="cover",e.addEventListener("timeupdate",function(){return seek.value=this.currentTime,currentTime.innerHTML=getTimeFromSecs(this.currentTime)}),e.addEventListener("playing",function(){return playButton.innerHTML="&#xf04c;"}),e.addEventListener("pause",function(){return playButton.innerHTML="&#xf04b;"}),e.addEventListener("ended",function(){return playNext()}),e.play()},getActivePlayer=function(){return document.getElementsByClassName("active")[0]},getReadyPlayer=function(){var e,t;return e=document.getElementsByClassName("ready"),t=e[Math.floor(Math.random()*e.length)]},preparePlayer=function(e){var t;return e.classList.remove("ready"),e.removeEventListener("progress"),e.removeEventListener("timeupdate"),e.removeEventListener("playing"),e.removeEventListener("pause"),e.removeEventListener("ended"),t=$.Deferred(),getRandomSong().done(function(n){e.src=n.stream_url,e.setAttribute("title",n.title),e.setAttribute("artwork",n.artwork),e.setAttribute("query",n.query),e.setAttribute("duration",n.duration),e.classList.add("ready"),t.resolve(e)}),t.promise()},getRandomSong=function(){var e,t;return t=top_queries[Math.floor(Math.random()*top_queries.length)],e=$.Deferred(),SC.get("/tracks",{q:t,limit:200},function(n){var r,a,o,l,i,u,s,c,g,d,p,y,m,_,v,f,h,x,k,E,L,B,T,w,P,A,b,I,M;if(null!=n&&0===n.length)return c=!1,e.resolve(c),void 0;for(s=[],h=[],a=[],x=0,E=n.length;E>x;x++){for(song=n[x],l=0,u=null==song.genre?"":song.genre.toLowerCase(),v=null==song.title?"":song.title.toLowerCase(),g=null==song.stream_url?"":song.stream_url,null==song.tag_list?m=[]:y=song.tag_list.toLowerCase().split(" "),k=0,L=exclude_tags.length;L>k;k++)_=exclude_tags[k],-1!==v.indexOf(_)&&(l+=1);for(A=0,B=exclude_tags.length;B>A;A++)for(_=exclude_tags[A],b=0,T=y.length;T>b;b++)p=y[b],-1!==p.indexOf(_)&&(l+=1);""===g&&(l+=1),0===l&&a.push(song)}for(I=0,w=a.length;w>I;I++){if(song=a[I],u=null==song.genre?"":song.genre.toLowerCase(),v=null==song.title?"":song.title.toLowerCase(),null==song.tag_list?m=[]:y=song.tag_list.toLowerCase().split(" "),r=0,__indexOf.call(priority_tags,u)>=0&&(r+=1),y.length>0)for(M=0,P=y.length;P>M;M++)p=y[M],__indexOf.call(priority_tags,p)>=0&&__indexOf.call(exclude_tags,p)<0&&(r+=1);hangul.test(v)===!0&&(r+=1),r>0?s.push(song):h.push(song)}s.length>0?(s.sort(function(e,t){var n,r;return n=e.playback_count,r=t.playback_count,n>r?-1:r>n?1:0}),f=s[0],o=f.artwork_url.replace("-large","-t500x500"),v=f.title,i=f.duration,d=f.stream_url):h.length>0&&(h.sort(function(e,t){var n,r;return n=e.playback_count,r=t.playback_count,n>r?-1:r>n?1:0}),f=h[0],o=f.artwork_url.replace("-large","-t500x500"),v=f.title,d=f.stream_url,i=f.duration),c=null!=d?{artwork:o,title:v,duration:i,stream_url:d+"?client_id="+client_id,query:t}:!1,e.resolve(c)}),e.promise()},$(document).ready(function(){return SC.initialize({client_id:client_id}),seek.addEventListener("change",function(){var e;return e=getActivePlayer(),e.play(),e.currentTime=seek.value}),seek.addEventListener("input",function(){var e;return e=getActivePlayer(),e.pause(),e.currentTime=seek.value}),nextButton.addEventListener("click",function(){return playNext()}),playButton.addEventListener("click",function(){var e;return e=getActivePlayer(),e.paused?e.play():e.pause()}),preparePlayer(player_one).done(function(e){return setActivePlayer(e),preparePlayer(player_two).done(function(){return preparePlayer(player_three).done(function(){return preparePlayer(player_four).done(function(){return preparePlayer(player_five).done})})})})});