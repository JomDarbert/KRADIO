var client_id,currentTime,endTime,exclude_tags,getActivePlayer,getRandomSong,getReadyPlayer,getTimeFromSecs,hangul,hangul_chars,logEvent,nextButton,pad,playButton,player_five,player_four,player_one,player_three,player_two,preparePlayer,priority_tags,seek,setActivePlayer,song_title,top_queries,__indexOf=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};client_id="2721807f620a4047d473472d46865f14",priority_tags=["kpop","k pop","k-pop","korean","korea"],exclude_tags=["cover","acoustic","instrumental","remix","mix","re mix","re-mix","version","ver.","cvr"],hangul_chars="[ᄀ-ᇿ|㄰-㆏|ꥠ-꥿|가-힯|ힰ-퟿]",hangul=new RegExp(hangul_chars),top_queries=["Madtown YOLO","VIXX Error","BTOB You're so fly","PSY Hangover","Boyfriend Witch","Raina You End And Me","Song Ji Eun Don't look at me like that","Ailee Don't touch me"],player_one=document.getElementById("player_one"),player_two=document.getElementById("player_two"),player_three=document.getElementById("player_three"),player_four=document.getElementById("player_four"),player_five=document.getElementById("player_five"),song_title=document.getElementById("title"),playButton=document.getElementById("playButton"),nextButton=document.getElementById("nextButton"),seek=document.getElementById("seek"),currentTime=document.getElementById("currentTime"),endTime=document.getElementById("endTime"),pad=function(e){return 10>e?"0"+e.toString():e.toString()},getTimeFromSecs=function(e){var t,r,n,a;return r=e/60,a=r%1*60,t=Math.floor(r),n=Math.floor(a),""+t+":"+pad(n)},logEvent=function(e){var t;return t=(new Date).toTimeString().split(" ")[0],console.log(""+t+" || "+e.target.id+" - "+e.type)},setActivePlayer=function(e){var t,r,n,a,l;for(n=document.getElementsByTagName("audio"),a=0,l=n.length;l>a;a++)r=n[a],t=r.classList.contains("active"),r===e&&t!==!0?(r.classList.add("active"),r.classList.remove("ready")):r.classList.remove("active");return song_title.innerHTML=e.getAttribute("title"),endTime.innerHTML=getTimeFromSecs(e.getAttribute("duration")/1e3),$("#seek").attr("max",e.getAttribute("duration")/1e3),e.addEventListener("progress",function(){var t,r;return e.buffered.length>0?(t=e.buffered.end(0)/e.duration*100+"%",r=100-e.buffered.end(0)/e.duration*100+"%",$("#seek").css("background-image","none"),$("#seek").css("background-image","linear-gradient(to right,#278998 "+t+",transparent "+r+")")):void 0}),e.addEventListener("timeupdate",function(){return $("#seek").val(this.currentTime),$("#currentTime").text(getTimeFromSecs(this.currentTime))}),e.addEventListener("playing",function(){return playButton.innerHTML="&#xf04c;"}),e.addEventListener("pause",function(){return playButton.innerHTML="&#xf04b;"}),e.play()},getActivePlayer=function(){return document.getElementsByClassName("active")[0]},getReadyPlayer=function(){var e,t;return e=document.getElementsByClassName("ready"),t=e[Math.floor(Math.random()*e.length)]},preparePlayer=function(e){var t;return e.classList.remove("ready"),e.removeEventListener("progress"),e.removeEventListener("timeupdate"),e.removeEventListener("playing"),e.removeEventListener("pause"),t=$.Deferred(),getRandomSong().done(function(r){e.src=r.stream_url,e.setAttribute("title",r.title),e.setAttribute("artwork",r.artwork),e.setAttribute("query",r.query),e.setAttribute("duration",r.duration),e.classList.add("ready"),t.resolve(e)}),t.promise()},getRandomSong=function(){var e,t;return t=top_queries[Math.floor(Math.random()*top_queries.length)],e=$.Deferred(),SC.get("/tracks",{q:t,limit:200},function(r){var n,a,l,i,o,u,s,c,d,g,p,y,m,_,f,v,h,k,x,E,B,L,T,P,A,b,w,S,$,I;if(null!=r&&0===r.length)return c=!1,e.resolve(c),void 0;for(s=[],k=[],a=[],x=0,T=r.length;T>x;x++){for(g=r[x],i=0,u=null==g.genre?"":g.genre.toLowerCase(),v=null==g.title?"":g.title.toLowerCase(),d=null==g.stream_url?"":g.stream_url,null==g.tag_list?_=[]:m=g.tag_list.toLowerCase().split(" "),E=0,P=exclude_tags.length;P>E;E++)f=exclude_tags[E],-1!==v.indexOf(f)&&(i+=1);for(B=0,A=exclude_tags.length;A>B;B++)for(f=exclude_tags[B],L=0,b=m.length;b>L;L++)y=m[L],-1!==y.indexOf(f)&&(i+=1);""===d&&(i+=1),0===i&&a.push(g)}for($=0,w=a.length;w>$;$++){if(g=a[$],u=null==g.genre?"":g.genre.toLowerCase(),v=null==g.title?"":g.title.toLowerCase(),null==g.tag_list?_=[]:m=g.tag_list.toLowerCase().split(" "),n=0,__indexOf.call(priority_tags,u)>=0&&(n+=1),m.length>0)for(I=0,S=m.length;S>I;I++)y=m[I],__indexOf.call(priority_tags,y)>=0&&__indexOf.call(exclude_tags,y)<0&&(n+=1);hangul.test(v)===!0&&(n+=1),n>0?s.push(g):k.push(g)}s.length>0?(s.sort(function(e,t){var r,n;return r=e.playback_count,n=t.playback_count,r>n?-1:n>r?1:0}),h=s[0],l=h.artwork_url.replace("-large","-t500x500"),v=h.title,o=h.duration,p=h.stream_url):k.length>0&&(k.sort(function(e,t){var r,n;return r=e.playback_count,n=t.playback_count,r>n?-1:n>r?1:0}),h=k[0],l=h.artwork_url.replace("-large","-t500x500"),v=h.title,p=h.stream_url,o=h.duration),c=null!=p?{artwork:l,title:v,duration:o,stream_url:p+"?client_id="+client_id,query:t}:!1,e.resolve(c)}),e.promise()},SC.initialize({client_id:client_id}),$("#seek").on("input",function(){var e;return e=getActivePlayer(),e.pause(),e.currentTime=$("#seek").val()}),$("#seek").on("change",function(){var e;return e=getActivePlayer(),e.play(),e.currentTime=$("#seek").val()}),$("#nextButton").click(function(){var e,t;return e=getActivePlayer(),e.pause(),preparePlayer(e),t=getReadyPlayer(),setActivePlayer(t),t.play(),console.log("currently playing ("+t.id+")"+t.getAttribute("title"))}),$("#playButton").click(function(){var e;return e=getActivePlayer(),e.paused?e.play():e.pause()}),$(document).ready(function(){return preparePlayer(player_one).done(function(e){return setActivePlayer(e),preparePlayer(player_two),preparePlayer(player_three),preparePlayer(player_four),preparePlayer(player_five)})});