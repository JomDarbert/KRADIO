var client_id,container,currentTime,endTime,exclude_tags,getActivePlayer,getRandomSong,getReadyPlayer,getTimeFromSecs,hangul,hangul_chars,logEvent,nextButton,pad,playButton,playNext,player_five,player_four,player_one,player_three,player_two,preparePlayer,priority_tags,seek,setActivePlayer,song_title,top_queries,__indexOf=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};client_id="2721807f620a4047d473472d46865f14",priority_tags=["kpop","k pop","k-pop","korean","korea"],exclude_tags=["cover","acoustic","instrumental","remix","mix","re mix","re-mix","version","ver.","cvr"],hangul_chars="[ᄀ-ᇿ|㄰-㆏|ꥠ-꥿|가-힯|ힰ-퟿]",hangul=new RegExp(hangul_chars),top_queries=["Madtown YOLO","VIXX Error","BTOB You're so fly","PSY Hangover","Boyfriend Witch","Raina You End And Me","Song Ji Eun Don't look at me like that","Ailee Don't touch me"],player_one=document.getElementById("player_one"),player_two=document.getElementById("player_two"),player_three=document.getElementById("player_three"),player_four=document.getElementById("player_four"),player_five=document.getElementById("player_five"),song_title=document.getElementById("title"),container=document.getElementById("container"),playButton=document.getElementById("playButton"),nextButton=document.getElementById("nextButton"),seek=document.getElementById("seek"),currentTime=document.getElementById("currentTime"),endTime=document.getElementById("endTime"),pad=function(e){return 10>e?"0"+e.toString():e.toString()},getTimeFromSecs=function(e){var t,r,n,a;return r=e/60,a=r%1*60,t=Math.floor(r),n=Math.floor(a),""+t+":"+pad(n)},logEvent=function(e){var t;return t=(new Date).toTimeString().split(" ")[0],console.log(""+t+" || "+e.target.id+" - "+e.type)},playNext=function(){var e,t;return e=getActivePlayer(),e.pause(),preparePlayer(e),t=getReadyPlayer(),setActivePlayer(t),t.play()},setActivePlayer=function(e){var t,r,n,a,i;for(n=document.getElementsByTagName("audio"),a=0,i=n.length;i>a;a++)r=n[a],t=r.classList.contains("active"),r===e&&t!==!0?(r.classList.add("active"),r.classList.remove("ready")):r.classList.remove("active");return song_title.innerHTML=e.getAttribute("title"),endTime.innerHTML=getTimeFromSecs(e.getAttribute("duration")/1e3),seek.setAttribute("max",e.getAttribute("duration")/1e3),container.style.background="url("+e.getAttribute("artwork")+") no-repeat center center fixed",container.style["background-size"]="cover",e.addEventListener("timeupdate",function(){return seek.value=this.currentTime,currentTime.innerHTML=getTimeFromSecs(this.currentTime)}),e.addEventListener("playing",function(){return playButton.innerHTML="&#xf04c;"}),e.addEventListener("pause",function(){return playButton.innerHTML="&#xf04b;"}),e.addEventListener("ended",function(){return playNext()}),e.play()},getActivePlayer=function(){return document.getElementsByClassName("active")[0]},getReadyPlayer=function(){var e,t;return e=document.getElementsByClassName("ready"),t=e[Math.floor(Math.random()*e.length)]},preparePlayer=function(e){var t;return e.classList.remove("ready"),e.removeEventListener("progress"),e.removeEventListener("timeupdate"),e.removeEventListener("playing"),e.removeEventListener("pause"),e.removeEventListener("ended"),t=$.Deferred(),getRandomSong().done(function(r){e.src=r.stream_url,e.setAttribute("title",r.title),e.setAttribute("artwork",r.artwork),e.setAttribute("query",r.query),e.setAttribute("duration",r.duration),e.classList.add("ready"),t.resolve(e)}),t.promise()},getRandomSong=function(){var e,t;return t=top_queries[Math.floor(Math.random()*top_queries.length)],e=$.Deferred(),SC.get("/tracks",{q:t,limit:200},function(r){var n,a,i,l,o,u,s,c,d,g,p,y,m,_,v,f,h,E,x,k,L,B,T,P,A,w,b,S,I,M;if(null!=r&&0===r.length)return c=!1,e.resolve(c),void 0;for(s=[],E=[],a=[],x=0,T=r.length;T>x;x++){for(g=r[x],l=0,u=null==g.genre?"":g.genre.toLowerCase(),f=null==g.title?"":g.title.toLowerCase(),d=null==g.stream_url?"":g.stream_url,null==g.tag_list?_=[]:m=g.tag_list.toLowerCase().split(" "),k=0,P=exclude_tags.length;P>k;k++)v=exclude_tags[k],-1!==f.indexOf(v)&&(l+=1);for(L=0,A=exclude_tags.length;A>L;L++)for(v=exclude_tags[L],B=0,w=m.length;w>B;B++)y=m[B],-1!==y.indexOf(v)&&(l+=1);""===d&&(l+=1),0===l&&a.push(g)}for(I=0,b=a.length;b>I;I++){if(g=a[I],u=null==g.genre?"":g.genre.toLowerCase(),f=null==g.title?"":g.title.toLowerCase(),null==g.tag_list?_=[]:m=g.tag_list.toLowerCase().split(" "),n=0,__indexOf.call(priority_tags,u)>=0&&(n+=1),m.length>0)for(M=0,S=m.length;S>M;M++)y=m[M],__indexOf.call(priority_tags,y)>=0&&__indexOf.call(exclude_tags,y)<0&&(n+=1);hangul.test(f)===!0&&(n+=1),n>0?s.push(g):E.push(g)}s.length>0?(s.sort(function(e,t){var r,n;return r=e.playback_count,n=t.playback_count,r>n?-1:n>r?1:0}),h=s[0],i=h.artwork_url.replace("-large","-t500x500"),f=h.title,o=h.duration,p=h.stream_url):E.length>0&&(E.sort(function(e,t){var r,n;return r=e.playback_count,n=t.playback_count,r>n?-1:n>r?1:0}),h=E[0],i=h.artwork_url.replace("-large","-t500x500"),f=h.title,p=h.stream_url,o=h.duration),c=null!=p?{artwork:i,title:f,duration:o,stream_url:p+"?client_id="+client_id,query:t}:!1,e.resolve(c)}),e.promise()},$(document).ready(function(){return SC.initialize({client_id:client_id}),seek.addEventListener("change",function(){var e;return e=getActivePlayer(),e.play(),e.currentTime=seek.value}),seek.addEventListener("input",function(){var e;return e=getActivePlayer(),e.pause(),e.currentTime=seek.value}),nextButton.addEventListener("click",function(){return playNext()}),playButton.addEventListener("click",function(){var e;return e=getActivePlayer(),e.paused?e.play():e.pause()}),preparePlayer(player_one).done(function(e){return setActivePlayer(e),preparePlayer(player_two).done(function(){return preparePlayer(player_three).done(function(){return preparePlayer(player_four).done(function(){return preparePlayer(player_five).done})})})})});