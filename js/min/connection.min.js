var client_id,currently_playing,exclude_tags,failed,getTimeFromSecs,hangul,logEvent,pad,playRandom,player,priority_tags,top_queries,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};client_id="2721807f620a4047d473472d46865f14",SC.initialize({client_id:client_id}),priority_tags=["kpop","k pop","k-pop","korean","korea"],exclude_tags=["cover","acoustic","instrumental","remix","mix","re mix","re-mix","version","ver.","cvr"],hangul=new RegExp("[ᄀ-ᇿ|㄰-㆏|ꥠ-꥿|가-힯|ힰ-퟿]"),top_queries=["Madtown YOLO","VIXX Error","BTOB You're so fly","PSY Hangover","Boyfriend Witch","Raina You End And Me","Song Ji Eun Don't look at me like that","Ailee Don't touch me","Holler Taetiseo","The Space Between Soyu","Go Crazy 2PM","Teen Top Missing","I Swear Sistar","Empty B.I","Anticipation Note NS YOON-G","Beautiful PARK BO RAM","Because I love You VIBE","양화대교 Yanghwa Bridge Zion. T","Sugar Free T-ara","소격동 Sogyeokdong IU","Let’s Not Go Crazy 8Eight","How I Am Kim Dong Ryul","Darling Girl’s Day","연애하나 봐 I Think I’m In Love Juniel","쳐다보지마 Don’t Look At Me Like That Song Ji Eun Secret","HER Block B","울컥 All Of A Sudden Krystal","눈물나는 내 사랑 Teardrop Of My Heart Kim Bum Soo","A Real Man Swings, Ailee","너무 보고 싶어 I Miss You So Much Acoustic Collabo","I Love You Yoon Mi Rae","MAMACITA Super Junior","I’ll Remain As A Friend Wheesung, Geeks","맘마미아 Mamma Mia Kara","The Day Noel","You’re So Fly BTOB","괜찮아 사랑이야 It’s Okay, That’s Love Davichi","Give Your Love? SPICA.S","I’m Fine Thank You Ladies’ Code","Still I’m By Your Side Clazziquai","Love Fiction Ulala Session","Body Language feat. Bumkey San E","눈, 코, 입 Eyes, Nose, Lips Taeyang","잠 못드는 밤 Sleepless Night feat. Punch Crush","노크 KNOCK Nasty Nasty","최고의 행운 Best Luck Chen EXO-M","컬러링 Color Ring WINNER","Love Me feat. Kim Tae Chun Linus’ Blanket","두 번 죽이는 말 Words To Kill Monday Kiz","Cha-Ga-Wa F.Cuz","빨개요 Red HyunA","그 한 사람 That One Person Lee Seung Hwan","Difficult Woman Jang Bum Joon","자전거 Bicycle Gary, Jung In","Pitiful feat. Hip Job Gavy NJ","Everyone Else But Me Yoo Seung Woo","가을냄새 I Smell The Autumn  Verbal Jint"],currently_playing=null,player=document.getElementById("player"),playRandom=function(){var e;for(console.log("entered playRandom "+new Date);;)if(e=top_queries[Math.floor(Math.random()*top_queries.length)],e!==currently_playing)break;currently_playing=e,SC.get("/tracks",{q:e,limit:200},function(e){var t,n,r,a,o,l,i,u,s,d,c,g,p,y,v,E,f,h,m,_,L,k,S,T,R,x,B,w;if(console.log("starting get request: "+new Date),null!=e&&0===e.length)playRandom();else{for(i=[],E=[],n=[],f=0,L=e.length;L>f;f++){for(u=e[f],a=0,l=null==u.genre?"":u.genre.toLowerCase(),y=null==u.title?"":u.title.toLowerCase(),null==u.tag_list?g=[]:c=u.tag_list.toLowerCase().split(" "),h=0,k=exclude_tags.length;k>h;h++)p=exclude_tags[h],-1!==y.indexOf(p)&&(a+=1);for(m=0,S=exclude_tags.length;S>m;m++)for(p=exclude_tags[m],_=0,T=c.length;T>_;_++)d=c[_],-1!==d.indexOf(p)&&(a+=1);0===a&&n.push(u)}for(B=0,R=n.length;R>B;B++){if(u=n[B],l=null==u.genre?"":u.genre.toLowerCase(),y=null==u.title?"":u.title.toLowerCase(),null==u.tag_list?g=[]:c=u.tag_list.toLowerCase().split(" "),t=0,__indexOf.call(priority_tags,l)>=0&&(t+=1),c.length>0)for(w=0,x=c.length;x>w;w++)d=c[w],__indexOf.call(priority_tags,d)>=0&&__indexOf.call(exclude_tags,d)<0&&(t+=1);hangul.test(y)===!0&&(t+=1),t>0?i.push(u):E.push(u)}i.length>0?(i.sort(function(e,t){var n,r;return n=e.playback_count,r=t.playback_count,n>r?-1:r>n?1:0}),v=i[0],r=v.artwork_url.replace("-large","-t500x500"),y=v.title,o=v.duration,s=v.stream_url,l=v.genre,g=v.tag_list):E.length>0?(E.sort(function(e,t){var n,r;return n=e.playback_count,r=t.playback_count,n>r?-1:r>n?1:0}),v=E[0],r=v.artwork_url.replace("-large","-t500x500"),y=v.title,s=v.stream_url,o=v.duration):playRandom(),player.src=s+"?client_id="+client_id,$("#title").text(y),$("#seek").attr("max",o/1e3),$("#endTime").text(getTimeFromSecs(o/1e3)),$("#container").css("background-size","cover"),$("#container").css("-webkit-background-size","cover"),$("#container").css("background","url("+r+") no-repeat center center fixed")}})},pad=function(e){return 10>e?"0"+e.toString():e.toString()},getTimeFromSecs=function(e){var t,n,r,a;return n=e/60,a=n%1*60,t=Math.floor(n),r=Math.floor(a),""+t+":"+pad(r)},player.addEventListener("error",failed=function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:return console.log("You aborted the video playback.");case e.target.error.MEDIA_ERR_NETWORK:return console.log("A network error caused the audio download to fail.");case e.target.error.MEDIA_ERR_DECODE:return console.log("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:return console.log("The video audio not be loaded, either because the server or network failed or because the format is not supported.");default:return console.log("An unknown error occurred.")}},!0),logEvent=function(e){var t;return t=(new Date).toTimeString().split(" ")[0],console.log(""+t+" - "+e.type)},player.addEventListener("load",logEvent),player.addEventListener("abort",logEvent),player.addEventListener("canplay",logEvent),player.addEventListener("canplaythrough",logEvent),player.addEventListener("durationchange",logEvent),player.addEventListener("emptied",logEvent),player.addEventListener("interruptbegin",logEvent),player.addEventListener("interruptend",logEvent),player.addEventListener("loadeddata",logEvent),player.addEventListener("loadedmetadata",logEvent),player.addEventListener("loadstart",logEvent),player.addEventListener("pause",logEvent),player.addEventListener("play",logEvent),player.addEventListener("playing",logEvent),player.addEventListener("ratechange",logEvent),player.addEventListener("seeked",logEvent),player.addEventListener("seeking",logEvent),player.addEventListener("stalled",logEvent),player.addEventListener("volumechange",logEvent),player.addEventListener("waiting",logEvent),player.addEventListener("error",logEvent),player.addEventListener("canplay",function(){return $("#nextButton").removeClass("spin")}),player.addEventListener("playing",function(){return playButton.innerHTML="&#xf04c;"}),player.addEventListener("pause",function(){return playButton.innerHTML="&#xf04b;"}),player.addEventListener("timeupdate",function(){return $("#seek").val(player.currentTime),$("#currentTime").text(getTimeFromSecs(player.currentTime))}),player.addEventListener("progress",function(){var e,t;return player.buffered.length>0?(e=player.buffered.end(0)/player.duration*100+"%",t=100-player.buffered.end(0)/player.duration*100+"%",$("#seek").css("background-image","linear-gradient(to right,#278998 "+e+",transparent "+t+")")):void 0}),player.addEventListener("ended",function(){return playRandom()}),player.addEventListener("stalled waiting",function(){return $("#nextButton").addClass("spin")}),$("#seek").on("input",function(){return player.pause(),player.currentTime=$("#seek").val()}),$("#seek").on("change",function(){return player.play(),player.currentTime=$("#seek").val()}),$("#nextButton").click(function(){return console.log("---------- NEXT PRESSED ----------"),console.log(new Date),$("#nextButton").addClass("spin"),playRandom()}),$("#playButton").click(function(){return player.paused?player.play():player.pause()}),$(document).ready(function(){return playRandom()});