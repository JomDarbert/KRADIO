(function(){var e,t,r,n,a,i,l,o,u,s,c,f,g,p,d,v,h,m,k,w,x,A,F,D,_=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};for(a="2721807f620a4047d473472d46865f14",SC.initialize({client_id:a}),m=["kpop","k pop","k-pop","korean","korea","kor","kor pop","korean pop","korean-pop","kor-pop","korean version","kr","kr ver","original"],t=["cover","acoustic","instrumental","remix","mix","re mix","re-mix","version","ver.","live","live cover","accapella","cvr","united states","america","india","indian","japan","china","chinese","japanese","viet","vietnam","vietnamese","thai","taiwan","taiwanese","russian","ambient","meditat"],f=/[^A-Za-z0-9\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uAC00-\uD7AF\uD7B0-\uD7FF \♡\.\「\」\”\“\’\∞\♥\|\【\】\–\{\}\[\]\!\@\#\$\%\^\&\*\(\)\-\_\=\+\;\:\'\"\,\.\<\>\/\\\?\`\~]/g,u=/[\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uAC00-\uD7AF\uD7B0-\uD7FF]/g,s=[],h="",l=function(){var e;return e=null,$.ajax({async:!1,global:!1,url:"../scrape/EYK/tutorial/eyk.json",dataType:"json",success:function(t){e=t}}),e}(),c=function(){var e;return e=null,$.ajax({async:!1,global:!1,url:"../scrape/MWAVE/tutorial/mwave.json",dataType:"json",success:function(t){e=t}}),e}(),v=[],k=0,A=l.length;A>k;k++)d=l[k],v.push(d.title);for(w=0,F=c.length;F>w;w++)d=c[w],v.push(d.artist+" "+d.title);for(v=arrayUnique(v),x=0,D=v.length;D>x;x++)g=v[x];r=function(e,r){var n,a,i,l,o,u,s,c,g,p,d,v,h,m,k,w,x;if(null==e.title)return!1;if(null==e.url)return!1;if(null==e.created)return!1;if(s=12,l=moment(e.created,"YYYY-MM-DD HH:MM:SS"),o=moment().subtract(s,"months"),o.diff(l,"months")>0)return!1;for(v=0,h=t.length;h>v;v++)if(d=t[v],-1!==e.title.indexOf(d))return!1;for(w=0,m=t.length;m>w;w++)if(d=t[w],null!=e.genre&&-1!==e.genre.indexOf(d))return!1;for(x=0,k=t.length;k>x;x++)if(d=t[x],_.call(e.tags,d)>=0)return!1;return u=f.test(e.title),u===!0?!1:(i=e.title.replace(/[^A-Za-z0-9\s]+/g,"").replace(/\s+/g," ").toLowerCase().trim(),a=r.replace(/[^A-Za-z0-9\s]+/g,"").replace(/\s+/g," ").toLowerCase().trim(),p=i.split(" "),c=a.split(" "),n=[p,c],g=n.shift().reduce(function(e,t){return-1===e.indexOf(t)&&n.every(function(e){return-1!==e.indexOf(t)})&&e.push(t),e},[]),0===g.length?!1:!0)},n=function(e,t){var r,n,a,i,l,o,s,c,f,g,p,d,v,h;for(s=0,f=0,l=0,a=e.title.replace(/[^A-Za-z0-9\s]+/g,"").replace(/\s+/g," ").toLowerCase().trim(),n=t.replace(/[^A-Za-z0-9\s]+/g,"").replace(/\s+/g," ").toLowerCase().trim(),h=e.genre,_.call(m,h)>=0&&(s+=1),d=0,v=m.length;v>d;d++)g=m[d],_.call(e.tags,g)>=0&&(f+=1);return f>0&&(s+=1),p=u.test(e.title),p===!0&&(s+=1),c=a.split(" "),i=n.split(" "),r=[c,i],o=r.shift().reduce(function(e,t){return-1===e.indexOf(t)&&r.every(function(e){return-1!==e.indexOf(t)})&&e.push(t),e},[]),o.length===i.length&&(s+=1),levenstein(n,a)<=10&&(s+=1),s},o=function(e){var t;return t=$.Deferred(),console.log("Entered at: "+new Date),SC.get("/tracks",{q:e,limit:200},function(a){var i;return console.log("Got tracks: "+new Date),null==a||0===a.length?(t.resolve(!1),void 0):(i=[],a.forEach(function(t){var a,l,o,u,s,c,f,g,p;return null!=t.title&&(f=t.title.toLowerCase()),null!=t.genre&&(s=t.genre.toLowerCase()),null!=t.tag_list&&(c=t.tag_list.toLowerCase().split(" ")),null!=t.created_at&&(o=t.created_at),null!=t.stream_url&&(g=t.stream_url),null!=t.artwork_url&&(a=t.artwork_url.replace("-large","-t500x500")),null!=t.playback_count&&(p=t.playback_count),null!=t.duration&&(u=t.duration/1e3),d={title:f,genre:s,tags:c,created:o,url:g,artwork:a,duration:u,views:p,score:0,query:e},l=r(d,e),d.score=n(d,e),l===!0&&d.score>=2?i.push(d):void 0}),i.sort(function(e,t){var r;return r=t.score-e.score,0!==r?r:t.views-e.views}),i.length>0?t.resolve(i[0]):t.resolve(!1),void 0)}),t.promise()},e=function(e){return s.unshift(e.title)},p=function(){return v[Math.floor(Math.random()*v.length)]},i=0,$("#test").on("click",function(){return o(p()).done(function(e){return console.log("Exited: "+new Date),console.log(e)})})}).call(this);